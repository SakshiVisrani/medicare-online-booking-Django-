{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
  <div class="card shadow-lg rounded p-4">
    <h2 class="text-center mb-4">Confirm Your Appointment</h2>
    
    <div class="row mb-4">
      <div class="col-md-6">
        <h4>Doctor Details</h4>
        <p><strong>Name:</strong> Dr. {{ book.doctor.name }}</p>
        <p><strong>Speciality:</strong> {{ book.doctor.speciality }}</p>
        <p><strong>Experience:</strong> {{ book.doctor.experience }} years</p>
      </div>
      <div class="col-md-6">
        <h4>Slot Details</h4>
        <p><strong>Date:</strong> {{ book.slot.date }}</p>
        <p><strong>Time:</strong> {{ book.slot.time }}</p>
        
      </div>
    </div>

    <div class="text-center mb-4">
      <h3>Total Amount: â‚¹{{ book.amount }}</h3>
    </div>

    <div class="text-center">
      <button id="rzp-button1" class="btn btn-primary btn-lg">Pay with Razorpay</button>
    </div>
  </div>
</div>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
var options = {
    "key": "{{ RAZORPAY_KEY_ID }}",
    "amount": "{{ data.amount }}", // in paise
    "currency": "INR",
    "name": "Curasync Health",
    "description": "Doctor Appointment Booking",
    "image": "https://example.com/your_logo",  // Optional
    "order_id": "{{ payment.id }}",  // Razorpay order ID
    "callback_url": "{% url 'payment-success' %}",
    "prefill": {
        "name": "{{ request.user.username }}",
        "email": "{{ request.user.email }}",
        "contact": "9000090000"
    },
    "notes": {
        "booking_id": "{{ book.booking_uuid }}"
    },
    "theme": {
        "color": "#1abc9c"
    }
};

var rzp1 = new Razorpay(options);
document.getElementById('rzp-button1').onclick = function(e){
    rzp1.open();
    e.preventDefault();
}
</script>
{% endblock %}
